<html>
<body>
<canvas id="screen" style="border:1px solid #000" width=640 height=480 />
</body>
<script type="text/javascript" src="bezier.js"></script>
<script type="text/javascript" src="curve.js"></script>
<script type="text/javascript" src="sampling.js"></script>
<script type="text/javascript">

    // Demonstration of bezier curves by recursive definition
    // For the purposes of this, a point is an object with x and y members

    var c = document.getElementById("screen");
    var ctx = c.getContext("2d");

    var renderer = curve(ctx);

    var p0 = { x: 100, y: 100 };
    var p1 = { x: 400, y: 400 };
    var p2 = { x: 500, y: 100 };
    var p3 = { x: 100, y: 550 };

    var first = bezier.firstOrder(p0, p1);
    var second = bezier.secondOrder(p0, p2, p1);
    var third = bezier.thirdOrder(p0, p2, p3, p1);


    renderer.drawCurve(first, p0);
    renderer.drawCurve(second, p0);
    renderer.drawCurve(third, p0);

    var p0 = { x: 0, y: 0 };
    var p1 = { x: 0.25, y: 1};
    var p2 = { x: 0.75, y: -1};
    var p3 = { x: 1, y: 0 };
    var f = bezier.thirdOrder(p0, p1, p2, p3);
    var points = [];
    var resolution = 48000;

    for(t = 0; t <= resolution; t++) {
        points.push(f(t / resolution));
    }

    var result = sampling.sample(resolution, points);

    console.log("<p>Success: " + result.success + ", fail: " + result.fail);
    console.log(", cont: " + result.cont + ", DeltaAcc: " + result.deltaAcc + "</p>");

</script>
</html>
